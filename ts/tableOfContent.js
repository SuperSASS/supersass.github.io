(()=>{var p={strongEaseOut:function(r,e,t,i){return t*((r=r/i-1)*r*r*r*r+1)+e},linear:function(r,e,t,i){return t*r/i+e}},c=function(r){this.dom=r,this.startTime=0,this.startPos=0,this.endPos=0,this.easing=null,this.duration=null},h=0;c.prototype.start=function(r,e,t){this.startTime=+new Date,this.startPos=this.dom.scrollTop,this.endPos=r,this.duration=e,this.easing=p[t];var i=this,s=setInterval(function(){(i.step()===!1||s<h)&&clearInterval(s)},10);h=h<s?s:h};c.prototype.step=function(){var r=+new Date;if(r>=this.startTime+this.duration)return this.update(this.endPos),!1;var e=this.easing(r-this.startTime,this.startPos,this.endPos-this.startPos,this.duration);this.update(e)};c.prototype.update=function(r){this.dom.scrollTop=r};var y=c,u=class{constructor(e){this.otherList=new Array;this.getOtherList(document.getElementById("main-menu")),this.classTOC=document.getElementsByClassName("sticky-toc")[0],this.TOC=document.getElementById("TableOfContents"),this.content=e.getElementsByTagName("span")[0],this.currentTOC="disappear",this.bindClick(e),window.addEventListener("DOMContentLoaded",()=>{this.enableStickyToc()}),this.TOC.style.setProperty("transition","all .3s ease"),e.style.setProperty("transition","all .3s ease")}bindClick(e){e.addEventListener("click",t=>{this.currentTOC=="show"?(this.changeDisplay("show"),this.content.innerHTML="\u663E\u793A\u6587\u7AE0\u76EE\u5F55",this.currentTOC="disappear"):(this.changeDisplay("disappear"),this.content.innerHTML="\u9690\u85CF\u6587\u7AE0\u76EE\u5F55",this.updatePosAndColor(),this.currentTOC="show")})}enableStickyToc(){let e=new IntersectionObserver(s=>{s.forEach(a=>{let l=a.target.getAttribute("id");if(a.isIntersecting){if(t==!0){let n=document.querySelector(".sticky-toc li.active");n.firstChild.classList.remove(i),n.classList.remove("active"),t=!1,this.updatePosAndColor()}let o=document.querySelector(`.sticky-toc li a[href="#${l}"]`);o&&(o.parentElement.classList.add("active"),this.updatePosAndColor())}else if(document.querySelectorAll(".sticky-toc li.active").length==1)t=!0;else{let o=document.querySelector(`.sticky-toc li a[href="#${l}"]`);o&&(o.classList.remove(i),o.parentElement.classList.remove("active"),this.updatePosAndColor())}})});var t=!1,i="text-now";document.querySelectorAll(".article-content h1[id]").forEach(s=>{e.observe(s)}),document.querySelectorAll(".article-content h2[id]").forEach(s=>{e.observe(s)}),document.querySelectorAll(".article-content h3[id]").forEach(s=>{e.observe(s)}),document.querySelectorAll(".article-content h4[id]").forEach(s=>{e.observe(s)}),document.querySelectorAll(".article-content h5[id]").forEach(s=>{e.observe(s)}),document.querySelectorAll(".article-content h6[id]").forEach(s=>{e.observe(s)})}updatePosAndColor(){var e="text-now",t=document.querySelector("#sticky-toc"),i=new y(t);let s=document.querySelectorAll(".sticky-toc li.active"),a=s.length;if(a!=0){let o=s[0];o.firstChild.classList.add(e);var l=window.innerHeight*.3;let n=o.offsetTop-l;n>0?i.start(n,300,"linear"):i.start(0,300,"linear");for(let d=1;d<a;d++)s[d].firstChild.classList.remove(e)}}changeDisplay(e){for(let t=0;t<this.otherList.length;t++)e=="disappear"?(this.otherList[t].style.height=0,this.otherList[t].style.padding=0,this.otherList[t].style.margin=0,this.otherList[t].style.visibility="hidden",this.otherList[t].style.opacity=0,this.TOC.style.visibility="visible",this.TOC.style.opacity=1,this.classTOC.style.setProperty("overflow-y","auto")):(this.otherList[t].style.height="auto",this.otherList[t].style.padding="",this.otherList[t].style.margin="",this.otherList[t].style.visibility="visible",this.otherList[t].style.opacity=1,this.TOC.style.visibility="hidden",this.TOC.style.opacity=0,this.classTOC.style.setProperty("overflow-y","hidden"))}getOtherList(e){let t=e.getElementsByTagName("li");for(let i=0;i<t.length;i++)if(t[i].id=="basic"){this.otherList.push(t[i]);let s="height "+String((i+1)*.15)+"s ease,padding "+String((i+1)*.15)+"s ease,margin "+String((i+1)*.15)+"s ease,visibility "+String(i*.1)+"s ease,opacity "+String(i*.1)+"s ease";t[i].style.setProperty("transition",s)}}};new u(document.getElementById("toc-button"));})();
